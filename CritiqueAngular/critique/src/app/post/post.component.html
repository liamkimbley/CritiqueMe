<!-- Sidebar -->
<!-- Link to Sidebar function information: https://material.angular.io/components/sidenav/api-->
<mat-sidenav-container class="left-container" (backdropClick)="close('backdrop')" [style.marginTop.px]="mobileQuery.matches ? 56 : 0">
  <mat-sidenav #sidenav [fixedInViewport]="mobileQuery.matches" fixedTopGap="56" (keydown.escape)="close('escape')"
    disableClose>
    <div class="container-fluid" id="sidebarListItems">
      <p><button mat-raised-button color="accent" (click)="close('toggle button')">Dismiss</button></p>

      <div *ngFor="let item of categories">
        <div id="sidebarListItem">
          <button mat-raised-button color="primary" (click)="selectedCategory = item" (click)="close('toggle button')">{{item.name}}</button>
        </div>
      </div>
    </div>

  </mat-sidenav>
  <mat-sidenav-content>
    <div class="container" id="postsContainer">
      <p><button mat-raised-button color="accent" (click)="sidenav.open()"> Search Categories</button></p>
      <!-- Sidebar page content: everything wanted on the page goes in here -->


      <div *ngIf="selected">
        <button mat-raised-button color="primary" (click)="goBack()">Back</button>
      </div>

      <!-- display list of posts -->
      <div *ngIf="!selected">
        <div id="postCards" *ngFor="let post of posts | category: selectedCategory">
          <mat-card class="postCard">
            <mat-card-header>
              <mat-card-title>
                <!-- <img class="profilePic" width="80" height="80" src=selected.> -->
                <h2>{{post.title}}</h2>
              </mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <p>
                {{post.content}}
              </p>
              <p>
                <img class="postImage" src="{{post.media}}">
              </p>
            </mat-card-content>
            <mat-card-actions>
              <button mat-raised-button color="primary" (click)="displaySelected(post)">View More</button>
            </mat-card-actions>
          </mat-card>
        </div>
      </div>

      <!-- display single post -->
      <div *ngIf="selected">
        <table class="postTable">
          <tr>
            <th>{{selected.title}}</th>
          </tr>
          <tr>
            <td>{{selected.content}}</td>
          </tr>
          <tr>
            <td><img width="300" height="300" src="{{selected.media}}"></td>
          </tr>
          <!-- <tr>
            <td><iframe width="560" height="315" [src]='mediaUrl' frameborder="0"
                allowfullscreen></iframe></td>
          </tr> -->
          <tr>
            <td>{{selected.createdDate | date: 'fullDate'}}</td>
          </tr>
        </table>

        <h3>Comments: </h3>
        <table *ngFor="let c of selected.comments" class="commentTable">
          <tr>
            <td><img width="80" height="80" src="{{c.profile.imageUrl}}"></td>
            <td>{{c.profile.user.username}}</td>
          </tr>
          <tr>
            <td>{{c.content}}</td>
          </tr>
          <tr>
            <td>{{c.createdAt | date: 'fullDate'}}</td>
          </tr>
          <td><input class="upvoteImg" type="image" src="https://cdn.pixabay.com/photo/2013/07/13/10/27/hand-157251__340.png"
              alt="upvote" />
            <input class="downvoteImg" type="image" src="http://www.clker.com/cliparts/7/h/y/H/m/Y/red-thumbs-down-hi.png"
              alt="downvote" /></td>
          <td><input class="updateImg" type="image" src="https://cdn4.iconfinder.com/data/icons/Primo_Icons/PNG/128x128/button_blue_repeat.png"
              alt="update" (click)="updateComment(c.id)"/>
            <input class="deleteImg" type="image" src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/Crystal_button_cancel.svg/120px-Crystal_button_cancel.svg.png"
              alt="delete" (click)="deleteComment(c.id)"/></td>
        </table>

        <!-- add a comment -->
        <div>
          <form #comment="ngForm">
            <input class="commentTextBox" type="text" name="content" placeholder="write your comment here" ngModel><br>
            <button class="btn-outline-primary" type="submit" name="comment" (click)="addComment(comment, selected.id)">Comment</button>
            <button class="btn-outline-primary" type="submit" name="cancel">Cancel</button>
          </form>
        </div>

      </div>
      <!-- Sidebar content -->
    </div>
  </mat-sidenav-content>
</mat-sidenav-container>
<!-- Sidebar -->
